<!DOCTYPE html>
<html>
  <head>
    <title>Results</title>
  </head>
  <body>
    <h1>Results for Trip from {{origin}} to {{destination}}</h1>
    <h3>
      {{departure}} to {{return_date}}
    </h3>
<br></br>
<button id="sort-by-price">Sort by Price <span class="arrow">&#x21C5;</span></button>
<button id="sort-by-time">Sort by Time <span class="arrow">&#x21C5;</span></button>

    <ul>
      {% for flight in flights %}
        <h3>
          {{flight.airline}} - ${{flight.price}}
        </h3>
        <ul>
          {% for model in flight.models %}
           <li>{{model}}</li>
          {% endfor %}
        </ul>
        <h5>
          {{origin}} to {{destination}}
        </h5>
        <p>
          {{flight.originTakeoff}} to {{flight.originLanding}}
        </p>
        <p>
          {{flight.model[0]}}
        </p>
        <h5>
          {{destination}} to {{origin}}
        </h5>
        <p>
          {{flight.returnTakeoff}} to {{flight.returnLanding}}
        </p>
        <p>
          {{flight.model[1]}}
        </p>
        <br/>
        
      {% endfor %}
    </ul>
  </body>
</html>

<script>

  var currentParams = new URLSearchParams(window.location.search);

  document.getElementById('sort-by-price').addEventListener('click', function() {
  currentParams.delete('time_sort');
    if (currentParams.has('price_sort')) {
      var currentSort = currentParams.get('price_sort');
      var newSort = (currentSort === 'price') ? '-price' : 'price';
      currentParams.set('price_sort', newSort);
    } else {
      currentParams.append('price_sort', 'price');
    }
    window.location.search = currentParams.toString();
  });

  document.getElementById('sort-by-time').addEventListener('click', function() {
    currentParams.delete('price_sort');
    if (currentParams.has('time_sort')) {
      var currentSort = currentParams.get('time_sort');
      var newSort = (currentSort === 'time') ? '-time' : 'time';
      currentParams.set('time_sort', newSort);
    } else {
      currentParams.append('time_sort', 'time');
    }
    window.location.search = currentParams.toString();
  });
</script>